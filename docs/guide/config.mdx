# ğŸ› ï¸ é…ç½®

:::tip

é…ç½®æ–‡ä»¶ä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆåœ¨æ ¹ç›®å½•ã€‚

:::

## Config.yaml ä¸»é…ç½®æ–‡ä»¶

`config.yaml` é…ç½®æ–‡ä»¶ç¤ºä¾‹å¦‚ä¸‹ï¼š

```yaml
cache:
    external: false
    hosts: []
    master: ""
    username: ""
    password: ""
database:
    type: sqlite
    host: ""
    name: ""
    username: ""
    password: ""
gocqhttp:
    enable: false
    host_url: http://127.0.0.1:5700
    delay: 3000
    enable_ws: false
logging:
    external: false
    mongo_uri: mongodb://
    mongo_db: ""
    cache_num: 80
    internal_log: false
mirai:
    enable: false
plugin:
    lua_enable: true
    lua_script_dir: scripts
    lua_sandbox: false
search:
    enable: false
    host: ""
    index_name: ""
    username: ""
    password: ""
server:
    listen_port: "3000"
    rpc_port: "3001"
    debug_mode: false
    file_logger: false

```

### Server æœåŠ¡å™¨é…ç½®

- `listen_port` ç›‘å¬ç«¯å£ï¼š**HTTP** ç›‘å¬ç«¯å£ä¸ **Websocket** ç›‘å¬ç«¯å£
- `rpc_port` gRPCç›‘å¬ç«¯å£
- `debug_mode` è°ƒè¯•æ¨¡å¼ï¼šè¾“å‡ºç¨‹åºè°ƒè¯•æ—¥å¿—åˆ°ç»ˆç«¯ï¼Œé»˜è®¤ä¸º `true` å¼€å¯
- `file_logger` æ–‡ä»¶æ—¥å¿—ï¼šå°†æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ (**Beta**)

### Search æœç´¢å¼•æ“é…ç½®

:::caution

æš‚æœªå®ç°è¯¥åŠŸèƒ½ï¼

:::

- `type` é©±åŠ¨å™¨ç±»å‹ï¼š æœç´¢å¼•æ“é©±åŠ¨å™¨ç±»å‹ï¼Œé»˜è®¤ä¸º `internal`
- `host` æœåŠ¡å™¨åœ°å€ï¼š æœç´¢å¼•æ“çš„è¿œç«¯æœåŠ¡å™¨åœ°å€
- `index_name` ç´¢å¼•åç§°ï¼š æœç´¢å¼•æ“çš„ç´¢å¼•åç§°ï¼ˆè‡ªå®šä¹‰ï¼‰
- `username` ç”¨æˆ·åï¼šæœç´¢å¼•æ“è¿æ¥è®¤è¯ç”¨æˆ·å
- `password` å¯†ç ï¼š æœç´¢å¼•æ“è¿æ¥è®¤è¯å¯†ç 

### Cache ç¼“å­˜é…ç½®

- `external` æ˜¯å¦ä½¿ç”¨å¤–ç½®ç¼“å­˜å™¨
- `host` æœåŠ¡å™¨åœ°å€ï¼š ç¼“å­˜çš„è¿œç«¯æœåŠ¡å™¨åœ°å€
- `master` ä¸»ä»æ¨¡å¼Redisåœ°å€
- `username` ç”¨æˆ·åï¼šç¼“å­˜è¿æ¥è®¤è¯ç”¨æˆ·å
- `password` å¯†ç ï¼š ç¼“å­˜è¿æ¥è®¤è¯å¯†ç 

### Queue é˜Ÿåˆ—é…ç½®

:::caution

æš‚æœªå®ç°è¯¥åŠŸèƒ½ï¼

:::

- `type` é©±åŠ¨å™¨ç±»å‹ï¼š é˜Ÿåˆ—é©±åŠ¨å™¨ç±»å‹ï¼Œé»˜è®¤ä¸º `internal`
- `host` æœåŠ¡å™¨åœ°å€ï¼š é˜Ÿåˆ—çš„è¿œç«¯æœåŠ¡å™¨åœ°å€
- `index_name` å‰ç¼€åç§°ï¼š é˜Ÿåˆ—çš„å‰ç¼€åç§°ï¼ˆè‡ªå®šä¹‰ï¼‰
- `username` ç”¨æˆ·åï¼šé˜Ÿåˆ—è¿æ¥è®¤è¯ç”¨æˆ·å
- `password` å¯†ç ï¼š é˜Ÿåˆ—è¿æ¥è®¤è¯å¯†ç 

### Database æ•°æ®åº“é…ç½®


- `type` é©±åŠ¨å™¨ç±»å‹ï¼š æ•°æ®åº“é©±åŠ¨å™¨ç±»å‹ï¼Œé»˜è®¤ä¸º `sqlite` (å¯é€‰ï¼šMySQL,Postgres)
- `host` æœåŠ¡å™¨åœ°å€ï¼š æ•°æ®åº“çš„è¿œç«¯æœåŠ¡å™¨åœ°å€
- `name` æ•°æ®åº“åç§°ï¼š æ•°æ®åº“çš„åç§°
- `username` ç”¨æˆ·åï¼šæ•°æ®åº“è¿æ¥è®¤è¯ç”¨æˆ·å
- `password` å¯†ç ï¼š æ•°æ®åº“è¿æ¥è®¤è¯å¯†ç 

### GoCqHttp ç›¸å…³é…ç½®

:::tip

å»¶è¿Ÿæ—¶é—´é»˜è®¤ä¸º `3000` æ¯«ç§’ï¼Œå¦‚æœ **GoCqHttp** æœåŠ¡å“åº”æ—¶é—´è¿‡é•¿ï¼Œå¯ä»¥é€‚å½“è°ƒæ•´å»¶è¿Ÿæ—¶é—´ã€‚ï¼ˆè°ƒæ•´è¯¥å‚æ•°å¯èƒ½é€ æˆæœºå™¨äººè´¦å·é£æ§ï¼‰

å¯ç”¨ **WebSocket** åï¼ŒæœåŠ¡å™¨åœ°å€å¡«å†™ **GoCqHttp** çš„ **WebSocket** åœ°å€ï¼Œä¾‹å¦‚ `ws://127.0.0.1:8000`ï¼Œå°†å¯ç”¨æ­£å‘ **WebSocket** è¿æ¥ã€‚

:::

- `enable` æ˜¯å¦å¯ç”¨ï¼šæ˜¯å¦å¯ç”¨ **GoCqHttp** æœåŠ¡
- `host_url` æœåŠ¡å™¨åœ°å€ï¼š **GoCqHttp** æœåŠ¡çš„åœ°å€
- `delay` å»¶è¿Ÿæ—¶é—´ï¼š**GoCqHttp** å“åº”å»¶è¿Ÿæ—¶é—´
- `enable_ws` å¯ç”¨WSï¼šæ˜¯å¦å¯ç”¨ **Websocket** æœåŠ¡

### Logging æ—¥å¿—è®°å½•å™¨

- `external` æ˜¯å¦å¯ç”¨å¤–ç½®æ—¥å¿—è®°å½•å™¨
- `mongo_uri` MongoDBè¿æ¥åœ°å€
- `mongo_db` MongoDBæ•°æ®åº“åç§°
- `cache_num` è®°å½•ç¼“å­˜æ•°é‡
- `internal_log` æ˜¯å¦å°†æ—¥å¿—è®°å½•åˆ°æ•°æ®åº“

### Plugin æ’ä»¶ç®¡ç†

- `lua_enable` æ˜¯å¦å¯ç”¨Luaè„šæœ¬æ”¯æŒ
- `lua_script_dir` Luaè„šæœ¬ç›®å½•



## Lua.ini Luaè„šæœ¬ç®¡ç†

```ini
[example]
enable = false
script = example.lua
```
:::caution

ä¸­æ‹¬å·å†…çš„æ’ä»¶åç§°å¿…é¡»å”¯ä¸€

:::


- `enable` æ˜¯å¦å¯ç”¨è¯¥è„šæœ¬
- `script` è„šæœ¬æ–‡ä»¶åç§°